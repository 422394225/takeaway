###无别名通用datatable的sql
#define dbCondition(conditions)
	#@dbCondition_alias(conditions,null,null)
#end
###表中有别名通用datatable的sql
#define dbCondition_alias(conditions,mainAlias,aliasMap)
	#if( conditions )
		#set(whereCond = conditions["whereCond"])
		#if( whereCond )
			AND ( 1=0 
			#for(wc : whereCond)
			 	OR 
			 	#if( mainAlias && aliasMap )
			 		#set(aliasMapVal = aliasMap[wc.key])
				 	#if( aliasMapVal ) #(aliasMapVal)
				 	#else #(mainAlias).`#(wc.key)` 
				 	#end
				#else
					`#(wc.key)` 
				#end
			 	LIKE BINARY '%#(wc.value)%'
			#end
			 )
		#end
		
		#set(limitCond = conditions["limitCond"])
		#if( limitCond )
			#for(lc : limitCond)
			 	AND 
			 	#if( mainAlias && aliasMap )
			 		#set(aliasMapVal = aliasMap[lc.key])
				 	#if( aliasMapVal ) #(aliasMapVal)
				 	#else #(mainAlias).#(lc.key)  
				 	#end
				#else
					#(lc.key) 
				#end
			 	#(lc.value) 
			#end
		#end
			
		#set(orderbyCond = conditions["orderbyCond"])
		#if( orderbyCond )
			#for(obc : orderbyCond)
				#(for.index > 0 ? ",":"ORDER BY") 
				#if( mainAlias && aliasMap )
			 		#set(aliasMapVal = aliasMap[obc.key])
				 	#if( aliasMapVal ) #(aliasMapVal)
				 	#else #(mainAlias).`#(obc.key)`  
				 	#end
				#else
					`#(obc.key)` 
				#end
				#(obc.value)
			#end
		#end
	#end
#end

#namespace("admin")
	#sql("list")
		#set(mainAlias = "a")
		#set(aliasMap = {"ROLE_NAME":"r.`NAME`"})
		SELECT a.*,r.`NAME` AS ROLE_NAME FROM t_admin AS a
		LEFT JOIN t_role AS r ON r.ID = ROLE_ID 
		WHERE 1=1 
		#@dbCondition_alias(conditions,mainAlias,aliasMap)
	#end
#end

#namespace("role")
	#sql("list")
		SELECT * FROM t_role WHERE 1=1 
		#@dbCondition(conditions)
	#end
#end

#namespace("user")
	#sql("list")
		SELECT *,CASE WHEN SEX=1 THEN '男' WHEN SEX =2 THEN '女' ELSE '未知' END AS SEXSTR 
		FROM t_user WHERE 1=1 
		#@dbCondition(conditions)
	#end
#end


#namespace("customer")
	#sql("list")
		SELECT *
		FROM t_customer 
		WHERE 1=1
		#@dbCondition(conditions)
	#end
#end

#namespace("menu")
	#sql("list")
		SELECT *
		FROM t_menu 
		WHERE 1=1 
		#@dbCondition(conditions)
	#end
#end

#namespace("log")
	#sql("list")
	#set(mainAlias = "d")
		#set(aliasMap = {"ADMIN_NAME":"t.`NAME`"})
		SELECT
	d.*, t. NAME AS ADMIN_NAME
	FROM
	t_log AS d
	LEFT JOIN t_admin t ON d.ADMIN_ID = t.ID
	WHERE 1=1
		#@dbCondition_alias(conditions,mainAlias,aliasMap)
	#end
#end

#namespace("food")
	#sql("list")
	#set(mainAlias = "d")
		#set(aliasMap = {"SHOP_NAME":"t.`NAME`"})
		SELECT
	d.*, t. NAME AS SHOP_NAME
	FROM
	t_food AS d
	LEFT JOIN t_shop t ON d.SHOP_ID = t.ID
	WHERE 1=1
		#@dbCondition_alias(conditions,mainAlias,aliasMap)
	#end
	#sql("histroy")
		SELECT	*
	FROM
	t_food_histroy
	WHERE 1=1 
		#@dbCondition_alias(conditions,mainAlias,aliasMap)
	#end
#end

#namespace("feedback")
	#sql("list")
		SELECT *
		FROM t_feedback 
		WHERE 1=1 
		#@dbCondition(conditions)
	#end
#end