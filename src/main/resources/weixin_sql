#namespace("shop")
	#sql("search")
		SELECT * FROM t_shop AS s
		WHERE s.`NAME` LIKE '%#(keyword)%' AND s.`STATE`!=-2
		ORDER BY s.SALE_NUM DESC
	#end
	#sql("getByType")
		SELECT s.* FROM 
		t_shop_type_relation AS str
		JOIN t_shop AS s ON str.SHOPID = s.ID
		WHERE str.TYPEID = ? AND s.`STATE`!=-2
        ORDER BY s.SALE_NUM DESC
	#end
	#sql("inId")
	    SELECT * FROM t_shop
	    WHERE ID IN (#(inParams))
	    AND STATE!=-2
	    ORDER BY SALE_NUM DESC
	#end
	#sql("groupByDistant")
        SELECT s.*,((LONGITUDE-#(lng))*(LONGITUDE-#(lng))+ (LATITUDE-#(lat))* (LATITUDE-#(lat))) AS dst
        FROM t_shop AS s
        WHERE s.`STATE`!=-2
        ORDER BY dst ASC,s.SALE_NUM DESC
    #end
#end

#namespace("shopType_wx")
    #sql("list")
        SELECT * FROM t_shop_type
        WHERE DELETED=0
        ORDER BY ORDER_NUM ASC,CREATE_TIME DESC
        #if( only )
            limit #(only)
        #end
    #end
#end

#namespace("food")
	#sql("search")
		SELECT f.*,s.`NAME` AS SHOP_NAME,s.`RATE_AVG`,s.`ID` AS SHOP_ID,f.`ID` AS FOOD_ID
		FROM t_food AS f
		LEFT JOIN t_shop AS s ON f.SHOP_ID = s.ID
		WHERE f.`STATE` = '1' AND f.`NAME` LIKE '%#(keyword)%'
        ORDER BY s.RATE_AVG
	#end
	#sql("getByType")
	    SELECT * FROM t_food
	    WHERE TYPE_ID = #(id)
	    AND STATE = 1
	#end
#end

#namespace("user")
	#sql("getCollections")
		SELECT COLLECTION FROM t_user WHERE ID =?
	#end
#end

#namespace("userAddress")
	#sql("getByUid")
		SELECT *
        FROM t_user_address
        WHERE DELETED=0 AND USERID =?
	#end
	#sql("getDefault")
        SELECT *
        FROM t_user_address
        WHERE DELETED=0 AND USERID =?  AND `DEFAULT` = 1
    #end
#end

#namespace("foodType")
    #sql("getByShopId")
        SELECT * FROM t_food_type
        WHERE SHOP_ID =#(id) AND DELETED = 0
        ORDER BY ORDER_NUM ASC,CREATE_TIME DESC
    #end
#end